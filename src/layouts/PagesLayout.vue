<template>
  <q-layout view="hHh Lpr fFf">
    <q-header class="header bg-grey-main">
      <q-toolbar>
        <q-toolbar-title
          v-if="route.path == '/add'"
          class="page-title row items-center justify-center p-0 fw-700"
        >
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            class="page-icon-desktop"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M8 2C5.79086 2 4 3.79086 4 6C4 8.20914 5.79086 10 8 10C10.2091 10 12 8.20914 12 6C12 3.79086 10.2091 2 8 2ZM2 6C2 2.68629 4.68629 0 8 0C11.3137 0 14 2.68629 14 6C14 9.31371 11.3137 12 8 12C4.68629 12 2 9.31371 2 6ZM17 9C17.5523 9 18 9.44771 18 10V11H19C19.5523 11 20 11.4477 20 12C20 12.5523 19.5523 13 19 13H18V14C18 14.5523 17.5523 15 17 15C16.4477 15 16 14.5523 16 14V13H15C14.4477 13 14 12.5523 14 12C14 11.4477 14.4477 11 15 11H16V10C16 9.44771 16.4477 9 17 9ZM4.5 16C3.24054 16 2 17.2135 2 19C2 19.5523 1.55228 20 1 20C0.447715 20 0 19.5523 0 19C0 16.3682 1.89347 14 4.5 14H11.5C14.1065 14 16 16.3682 16 19C16 19.5523 15.5523 20 15 20C14.4477 20 14 19.5523 14 19C14 17.2135 12.7595 16 11.5 16H4.5Z"
              fill="#DDDDDD"
            />
          </svg>
          <svg
            width="15"
            height="14"
            viewBox="0 0 15 14"
            fill="none"
            class="page-icon-mobile"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M6.16732 1.66634C4.69456 1.66634 3.50065 2.86025 3.50065 4.33301C3.50065 5.80577 4.69456 6.99967 6.16732 6.99967C7.64008 6.99967 8.83398 5.80577 8.83398 4.33301C8.83398 2.86025 7.64008 1.66634 6.16732 1.66634ZM2.16732 4.33301C2.16732 2.12387 3.95818 0.333008 6.16732 0.333008C8.37646 0.333008 10.1673 2.12387 10.1673 4.33301C10.1673 6.54215 8.37646 8.33301 6.16732 8.33301C3.95818 8.33301 2.16732 6.54215 2.16732 4.33301ZM12.1673 6.33301C12.5355 6.33301 12.834 6.63148 12.834 6.99967V7.66634H13.5007C13.8688 7.66634 14.1673 7.96482 14.1673 8.33301C14.1673 8.7012 13.8688 8.99967 13.5007 8.99967H12.834V9.66634C12.834 10.0345 12.5355 10.333 12.1673 10.333C11.7991 10.333 11.5007 10.0345 11.5007 9.66634V8.99967H10.834C10.4658 8.99967 10.1673 8.7012 10.1673 8.33301C10.1673 7.96482 10.4658 7.66634 10.834 7.66634H11.5007V6.99967C11.5007 6.63148 11.7991 6.33301 12.1673 6.33301ZM3.83398 10.9997C2.99434 10.9997 2.16732 11.8087 2.16732 12.9997C2.16732 13.3679 1.86884 13.6663 1.50065 13.6663C1.13246 13.6663 0.833984 13.3679 0.833984 12.9997C0.833984 11.2451 2.0963 9.66634 3.83398 9.66634H8.50065C10.2383 9.66634 11.5007 11.2451 11.5007 12.9997C11.5007 13.3679 11.2022 13.6663 10.834 13.6663C10.4658 13.6663 10.1673 13.3679 10.1673 12.9997C10.1673 11.8087 9.34029 10.9997 8.50065 10.9997H3.83398Z"
              fill="#DDDDDD"
            />
          </svg>

          Добавить контакт
        </q-toolbar-title>
        <q-toolbar-title
          v-else-if="route.path !== '/add' && title"
          class="page-title row items-center justify-center p-0 fw-700"
        >
          <ContactIcon :contactCymbol="title[0]" />
          {{ title }}
        </q-toolbar-title>
        <router-link to="/" class="close-btn">
          <svg
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
            class="close-btn-icon-desktop"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M1.05703 1.05752C1.57773 0.536817 2.42195 0.536817 2.94265 1.05752L9.99984 8.11471L17.057 1.05752C17.5777 0.536817 18.4219 0.536817 18.9426 1.05752C19.4633 1.57822 19.4633 2.42244 18.9426 2.94313L11.8855 10.0003L18.9426 17.0575C19.4633 17.5782 19.4633 18.4224 18.9426 18.9431C18.4219 19.4638 17.5777 19.4638 17.057 18.9431L9.99984 11.8859L2.94265 18.9431C2.42195 19.4638 1.57773 19.4638 1.05703 18.9431C0.536329 18.4224 0.536329 17.5782 1.05703 17.0575L8.11422 10.0003L1.05703 2.94313C0.536329 2.42244 0.536329 1.57822 1.05703 1.05752Z"
              fill="#939393"
            />
          </svg>
          <svg
            width="14"
            height="14"
            viewBox="0 0 14 14"
            fill="none"
            class="close-btn-icon-mobile"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M0.292893 0.292893C0.683417 -0.0976311 1.31658 -0.0976311 1.70711 0.292893L7 5.58579L12.2929 0.292893C12.6834 -0.0976311 13.3166 -0.0976311 13.7071 0.292893C14.0976 0.683417 14.0976 1.31658 13.7071 1.70711L8.41421 7L13.7071 12.2929C14.0976 12.6834 14.0976 13.3166 13.7071 13.7071C13.3166 14.0976 12.6834 14.0976 12.2929 13.7071L7 8.41421L1.70711 13.7071C1.31658 14.0976 0.683417 14.0976 0.292893 13.7071C-0.0976311 13.3166 -0.0976311 12.6834 0.292893 12.2929L5.58579 7L0.292893 1.70711C-0.0976311 1.31658 -0.0976311 0.683417 0.292893 0.292893Z"
              fill="#939393"
            />
          </svg>
        </router-link>
      </q-toolbar>
    </q-header>

    <q-page-container>
      <router-view />
    </q-page-container>
  </q-layout>
</template>

<script setup>
import { computed } from "vue";
import { useRoute } from "vue-router";
import { useContactsStore } from "../stores/contacts-store.js";
import ContactIcon from "../components/ContactIcon.vue";

const route = useRoute();
const contactsStore = useContactsStore();

const title = computed(() => contactsStore.currentContact);
</script>
